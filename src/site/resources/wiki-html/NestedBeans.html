<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Nested Beans</title>
<style type="text/css"><!--
body {
	text-align:justify;
	font: 10pt verdana, sans-serif; 
	color: #000000; 
	background: #ffffff;
}

.monospace {font-family:monospace;}

.quote {
	padding: 0.5em;
	margin: 0 0 0.5em 0.5em;	
	border: 1px solid #ccc;	
	background: #eee;
}

h1,h2,h3,h4,h5,h6 {
	font-variant: small-caps;
	color: #111;
}

li {
	text-align: left
}

table {
	border-size:0;
}

th {
	vertical-align: top;
	color: #FFFF99;
	background: #0c2577;
}

td {
	vertical-align: top;
	padding: 1px;
	margin: 2px;
	font: 10pt verdana, sans-serif;
}
--></style>
  </head>
  <body>
<h1>Nested Beans</h1>
<p>
Back: <a href="BeanContexts.html">BeanContexts</a>  Next: <a href="EnumeratedTypes.html">EnumeratedTypes</a></p>
<p>
</p>
<p>
It is quite common for beans to reference other beans. WWB handles this for you. Let's look at <a href="workspace/WicketWebBeans/wicketwebbeans-examples/src/main/java/net/sourceforge/wicketwebbeans/examples/nested/NestedBeanPage.java.html">com.googlecode.wicketwebbeans.examples.nested.NestedBeanPage</a>. </p>
<p>
</p>
<p>


<!-- ======================================================== -->
<!-- = Java Sourcecode to HTML automatically converted code = -->
<!-- =   Java2Html Converter V4.1 2004 by Markus Gebhard  markus@jave.de   = -->
<!-- =     Further information: http://www.java2html.de     = -->
<div align="left" class="java">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#808080">01</font>&nbsp;<font color="#7f0055"><b>package&nbsp;</b></font><font color="#000000">com.googlecode.wicketwebbeans.examples.nested;</font><br/>
<font color="#808080">02</font>&nbsp;<font color="#ffffff"></font><br/>
<font color="#808080">03</font>&nbsp;<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.googlecode.wicketwebbeans.containers.BeanForm;</font><br/>
<font color="#808080">04</font>&nbsp;<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">com.googlecode.wicketwebbeans.model.BeanMetaData;</font><br/>
<font color="#808080">05</font>&nbsp;<font color="#ffffff"></font><br/>
<font color="#808080">06</font>&nbsp;<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">org.apache.wicket.markup.html.WebPage;</font><br/>
<font color="#808080">07</font>&nbsp;<font color="#ffffff"></font><br/>
<font color="#808080">08</font>&nbsp;<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">NestedBeanPage&nbsp;</font><font color="#7f0055"><b>extends&nbsp;</b></font><font color="#000000">WebPage</font><br/>
<font color="#808080">09</font>&nbsp;<font color="#000000">{</font><br/>
<font color="#808080">10</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">NestedBeanPage</font><font color="#000000">()</font><br/>
<font color="#808080">11</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#808080">12</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Customer&nbsp;bean&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">Customer</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#808080">13</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">BeanMetaData&nbsp;meta&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">BeanMetaData</font><font color="#000000">(</font><font color="#000000">bean.getClass</font><font color="#000000">()</font><font color="#000000">,&nbsp;null,&nbsp;this,&nbsp;null,&nbsp;</font><font color="#7f0055"><b>false</b></font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#808080">14</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">add</font><font color="#000000">(&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">BeanForm</font><font color="#000000">(</font><font color="#2a00ff">&#34;beanForm&#34;</font><font color="#000000">,&nbsp;bean,&nbsp;meta</font><font color="#000000">)&nbsp;)</font><font color="#000000">;</font><br/>
<font color="#808080">15</font>&nbsp;<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#808080">16</font>&nbsp;<font color="#000000">}</font></code>
    
   </td>
  <!-- end source code -->
   </tr>
  <!-- start Java2Html link -->
   <tr>
    <td align="right">
<small>
<a href="http://www.java2html.de" target="_blank">Java2html</a>
</small>
    </td>
   </tr>
  <!-- end Java2Html link -->
</table>
</div>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->

</p>
<p>
</p>
<p>
Note that we only create an instance of <a href="workspace/WicketWebBeans/wicketwebbeans-examples/src/main/java/net/sourceforge/wicketwebbeans/examples/nested/Customer.java.html">com.googlecode.wicketwebbeans.examples.nested.Customer</a>. The bill-to and ship-to <a href="workspace/WicketWebBeans/wicketwebbeans-examples/src/main/java/net/sourceforge/wicketwebbeans/examples/nested/Address.java.html">com.googlecode.wicketwebbeans.examples.nested.Address</a> objects are automatically instantiated by WWB.</p>
<p>
</p>
<p>
Here are the beanprops.</p>
<p>
</p>
<pre>	# Nested Bean Example
	Customer {
		props: 
			firstName, lastName, 
			billToAddress{colspan: 3}, 
			shipToAddress{colspan: 3};
	}
	
	Address {
		props: 
			address1{colspan: 3}, 
			address2{colspan: 3},
			city, state, zip; 
	}</pre><p>
</p>
<p>
</p>
<p>
Here we have specifications for the two beans we use: !Customer and !Address. The &quot;colspan&quot; specification tells BeanGridPanel to span the field across the three grid columns. In other words, this causes the field to span the entire row.  </p>
<p>
</p>
<p>
The result looks like:</p>
<p>
</p>
<p>
<img alt="Eclipse:/WicketWebBeans/doc/wiki/images/NestedBeanScreenshot.png" src="workspace/WicketWebBeans/doc/wiki/images/NestedBeanScreenshot.png"/></p>
<p>
</p>
<p>
By default, nested objects are presented in a <a href="workspace/WicketWebBeans/wicketwebbeans/src/main/java/net/sourceforge/wicketwebbeans/fields/BeanGridField.java.html">com.googlecode.wicketwebbeans.fields.BeanGridField</a> - which is a nested version of the BeanGridPanel used by BeanForm. There are other variations of nested bean fields, such as <a href="workspace/WicketWebBeans/wicketwebbeans/src/main/java/net/sourceforge/wicketwebbeans/fields/BeanInCollapsibleField.java.html">com.googlecode.wicketwebbeans.fields.BeanInCollapsibleField</a>, <a href="workspace/WicketWebBeans/wicketwebbeans/src/main/java/net/sourceforge/wicketwebbeans/fields/BeanInlineField.java.html">com.googlecode.wicketwebbeans.fields.BeanInlineField</a>, and <a href="workspace/WicketWebBeans/wicketwebbeans/src/main/java/net/sourceforge/wicketwebbeans/fields/BeanWithParentLabelField.java.html">com.googlecode.wicketwebbeans.fields.BeanWithParentLabelField</a>. If we wanted to use BeanInCollapsibleField rather than the default, we could say:</p>
<p>
</p>
<pre>...	
	Customer {
		props: 
			firstName, lastName, 
			billToAddress{colspan: 3; fieldType: BeanInCollapsibleField }, 
			shipToAddress{colspan: 3; fieldType: BeanInCollapsibleField };
	}</pre><p>
</p>
<p>
Which results in collapsible fields for the Address beans:</p>
<p>
 </p>
<p>
<img alt="Eclipse:/WicketWebBeans/doc/wiki/images/NestedBean2Screenshot.png" src="workspace/WicketWebBeans/doc/wiki/images/NestedBean2Screenshot.png"/></p>
<p>
</p>
<p>
These fields have a bar across the top that allows you to expand and contract the content.</p>
<p>
</p>
<p>
NOTE: If your bean has a nested bean that is null, WWB will instantiate it so that it can be rendered to be edited. When using LoadableDetachableModel, you should save that instantiated nested bean in the onDetach event, otherwise you will get an error when trying to set a property value to the null bean returned in the next attach.
</p>
<p>
</p>
<p>
Back: <a href="BeanContexts.html">BeanContexts</a>  Next: <a href="EnumeratedTypes.html">EnumeratedTypes</a></p>
  </body>
</html>